name: Build Windows EXE

# 언제 실행할지 설정 (main 브랜치에 푸시하거나, 수동으로 실행)
on:
  push:
    branches: ["main"]
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest # 여기가 핵심! 윈도우 환경을 빌립니다.

    steps:
      # 1. 내 코드를 가져옵니다.
      - name: Checkout code
        uses: actions/checkout@v4

      # 2. 파이썬을 설치합니다.
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.11.7"

      # 3. 라이브러리들을 설치합니다.
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # 4. 작성하신 빌드 스크립트를 실행합니다.
      - name: Run Build Script
        run: python build_exe.py

      # 5. 결과물(.exe)을 업로드해서 내가 다운로드할 수 있게 합니다.
      - name: Upload EXE
        uses: actions/upload-artifact@v4
        with:
          name: TtuTtuAdventure-Windows # 다운로드될 압축파일 이름
          path: 배포용/ # 파이썬 스크립트에서 파일이 복사되는 폴더명
