# 🔧 관리자 페이지 사용 가이드

## 진입 방법

타이틀 화면에서 다음 키 조합을 누르세요:

**Windows/Linux**: `Ctrl + Shift + A`  
**macOS**: `Cmd + Shift + A`

---

## 📋 관리자 페이지 기능

### 1️⃣ 시리얼/센서 탭 (키: 1)

아두이노 초음파 센서의 연결 상태를 확인하고 실시간 거리 데이터를 모니터링합니다.

#### 표시 정보

- ✅ **연결 상태**: 시리얼 포트 연결 여부
- 📍 **현재 포트**: 연결된 시리얼 포트 (예: COM3, /dev/tty.usbmodem1101)
- 📏 **현재 거리**: 실시간 초음파 센서 거리 측정값 (cm)
- 📊 **거리 그래프**: 최근 50개의 측정값을 그래프로 표시

#### 조작 키

- `C`: 시리얼 포트 연결 시도
- `D`: 시리얼 포트 연결 해제
- `P`: 다음 사용 가능한 포트로 전환

#### 사용 예시

```
1. 아두이노를 USB로 연결
2. 관리자 페이지에서 '1' 키로 시리얼 탭 선택
3. 'C' 키를 눌러 연결 시도
4. 연결 성공 시 실시간 거리 데이터 확인
5. 센서 앞에 손을 가져가면 거리 변화 확인
```

#### 문제 해결

- **연결 안 됨**: `P` 키로 다른 포트 시도
- **데이터가 안 들어옴**: 아두이노 코드가 올바르게 업로드되었는지 확인
- **오류 메시지**: USB 케이블 재연결 또는 Arduino IDE에서 시리얼 모니터 닫기

---

### 2️⃣ 카메라 탭 (키: 2)

웹캠 연결 상태를 확인하고 카메라 인덱스를 쉽게 변경할 수 있습니다.

#### 표시 정보

- ✅ **연결 상태**: 카메라 연결 여부
- 🎥 **카메라 인덱스**: 현재 사용 중인 카메라 번호 (0-9)
- 📹 **실시간 프리뷰**: 카메라 영상 미리보기

#### 조작 키

- `C`: 현재 인덱스로 카메라 연결 시도
- `D`: 카메라 연결 해제
- `↑`: 카메라 인덱스 +1 (자동 재연결)
- `↓`: 카메라 인덱스 -1 (자동 재연결)
- `0-9`: 숫자 키로 직접 인덱스 선택 (자동 재연결)

#### 사용 예시

**케이스 1: 기본 웹캠이 작동하지 않을 때**

```
1. 관리자 페이지에서 '2' 키로 카메라 탭 선택
2. 현재 인덱스가 0이면, '1' 키를 눌러 인덱스 1로 변경
3. 자동으로 연결 시도
4. 프리뷰가 나타나면 성공!
```

**케이스 2: 외장 웹캠 사용**

```
1. 외장 웹캠 연결
2. '↑' 키를 여러 번 눌러 인덱스 증가
3. 연결될 때까지 시도
4. 프리뷰 확인
```

#### 문제 해결

- **연결 안 됨**: 여러 인덱스를 시도 (0, 1, 2...)
- **프리뷰가 안 보임**: 다른 프로그램에서 웹캠 사용 중인지 확인
- **느린 응답**: 해상도가 높은 경우 정상

#### 💡 팁

- 대부분의 컴퓨터에서 내장 웹캠은 인덱스 0
- 외장 웹캠은 인덱스 1 또는 2
- 한 번 찾은 인덱스를 기억해두세요!

---

### 3️⃣ 리더보드 탭 (키: 3)

게임 점수 데이터를 확인하고 편집/삭제할 수 있습니다.

#### 표시 정보

- 📊 **순위**: 플레이어 순위
- 👤 **이름**: 플레이어 이름
- ⏱️ **시간(ms)**: 게임 완료 시간 (밀리초)
- 🎯 **점수**: 계산된 점수

#### 조작 키

- `↑/↓`: 행 선택
- `N`: 선택한 행의 이름 편집
- `S`: 선택한 행의 점수 편집
- `Delete` / `Backspace`: 선택한 행 삭제
- `R`: 리더보드 새로고침

#### 편집 모드

이름이나 점수를 편집할 때:

- `Enter`: 저장
- `ESC`: 취소
- 일반 키: 입력
- `Backspace`: 삭제

#### 사용 예시

**플레이어 이름 변경**

```
1. '3' 키로 리더보드 탭 선택
2. ↑/↓ 키로 수정할 플레이어 선택
3. 'N' 키를 눌러 이름 편집 모드
4. 새 이름 입력
5. Enter로 저장
```

**부정 기록 삭제**

```
1. ↑/↓ 키로 삭제할 기록 선택
2. Delete 키를 눌러 즉시 삭제
3. 확인 없이 바로 삭제됨 (주의!)
```

**점수 수정**

```
1. ↑/↓ 키로 수정할 플레이어 선택
2. 'S' 키를 눌러 점수 편집 모드
3. 새 점수 입력 (밀리초 단위)
4. Enter로 저장
```

#### ⚠️ 주의사항

- 삭제는 즉시 적용되며 되돌릴 수 없습니다
- 편집 내용은 즉시 파일에 저장됩니다
- 백업을 위해 `leaderboard.json` 파일을 복사해두세요

---

## 🎮 공통 조작

- `1`: 시리얼/센서 탭으로 전환
- `2`: 카메라 탭으로 전환
- `3`: 리더보드 탭으로 전환
- `ESC`: 타이틀 화면으로 돌아가기

---

## 📝 실전 활용 시나리오

### 시나리오 1: 게임 설치 후 첫 설정

```
1. Ctrl+Shift+A로 관리자 페이지 진입
2. [카메라 탭] 웹캠 인덱스 확인 및 설정
3. [시리얼 탭] 아두이노 연결 확인
4. ESC로 타이틀로 돌아가 게임 시작
```

### 시나리오 2: 다른 컴퓨터에서 실행

```
1. 관리자 페이지 진입
2. [카메라 탭] 0-9 키로 작동하는 인덱스 찾기
3. [시리얼 탭] P 키로 사용 가능한 포트 찾기
4. 설정 완료 후 게임 실행
```

### 시나리오 3: 센서 문제 진단

```
1. 관리자 페이지 진입
2. [시리얼 탭] 연결 상태 확인
3. 거리 그래프로 센서 반응 확인
4. 센서 앞에서 손 움직여 데이터 변화 관찰
5. 문제 파악 후 하드웨어 점검
```

### 시나리오 4: 리더보드 관리

```
1. 관리자 페이지 진입
2. [리더보드 탭] 전체 기록 확인
3. 테스트 기록 삭제
4. 잘못된 이름 수정
5. 깔끔한 리더보드 완성!
```

---

## 🔍 문제 해결 가이드

### 관리자 페이지가 안 열려요

- 키 조합을 정확히 누르세요: `Ctrl+Shift+A` (동시에)
- macOS는 `Cmd+Shift+A`
- 타이틀 화면에서만 작동합니다

### 시리얼이 계속 연결 안 돼요

1. Arduino IDE의 시리얼 모니터를 닫으세요
2. USB 케이블을 재연결하세요
3. `P` 키로 모든 포트를 시도해보세요
4. 드라이버가 설치되어 있는지 확인하세요

### 카메라가 하나도 안 잡혀요

1. 다른 프로그램 (Zoom, Teams 등) 종료
2. Windows 카메라 앱 권한 확인
3. `webcam_test.py` 스크립트 실행
4. 외장 웹캠 사용 고려

### 리더보드 수정이 저장 안 돼요

1. 편집 후 반드시 `Enter` 키로 저장
2. 파일 권한 확인 (`leaderboard.json`)
3. 관리자 권한으로 프로그램 실행

---

## 💡 개발자 팁

### 데이터 백업

```bash
# 리더보드 백업
cp leaderboard.json leaderboard.backup.json

# 복원
cp leaderboard.backup.json leaderboard.json
```

### 리더보드 초기화

```bash
# 파일 삭제 (자동으로 샘플 데이터 생성됨)
rm leaderboard.json
```

### 카메라 인덱스 고정

`config.py`에서 기본값 변경:

```python
DEFAULT_CAMERA_INDEX = 1  # 외장 웹캠
```

### 시리얼 포트 고정

`config.py`에서 포트 지정:

```python
SERIAL_DEFAULT_PORT = "/dev/tty.usbmodem1101"  # macOS
SERIAL_DEFAULT_PORT = "COM3"  # Windows
```

---

## 🎯 관리자 페이지 단축키 요약

| 키             | 기능                            |
| -------------- | ------------------------------- |
| `Ctrl+Shift+A` | 관리자 페이지 진입 (타이틀에서) |
| `1`            | 시리얼/센서 탭                  |
| `2`            | 카메라 탭                       |
| `3`            | 리더보드 탭                     |
| `ESC`          | 타이틀로 돌아가기               |

### 시리얼 탭

| 키  | 기능      |
| --- | --------- |
| `C` | 연결      |
| `D` | 해제      |
| `P` | 다음 포트 |

### 카메라 탭

| 키    | 기능             |
| ----- | ---------------- |
| `C`   | 연결             |
| `D`   | 해제             |
| `↑/↓` | 인덱스 변경      |
| `0-9` | 인덱스 직접 선택 |

### 리더보드 탭

| 키       | 기능           |
| -------- | -------------- |
| `↑/↓`    | 선택           |
| `N`      | 이름 편집      |
| `S`      | 점수 편집      |
| `Delete` | 삭제           |
| `R`      | 새로고침       |
| `Enter`  | 저장 (편집 중) |
| `ESC`    | 취소 (편집 중) |

---

**관리자 페이지로 더 쉽고 편리하게 게임을 관리하세요! 🚀**
